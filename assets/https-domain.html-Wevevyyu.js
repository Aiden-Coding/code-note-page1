import{_ as p,r as o,o as r,c,a as e,b as t,d as s,w as a,e as i}from"./app-GjP6hEVt.js";const d="/code-note-page1/assets/image-52-xD0loyce.png",m="/code-note-page1/assets/image-53-CTtpgLIK.png",_="/code-note-page1/assets/image-54-CWF3rL8z.png",g="/code-note-page1/assets/image-55-4r_zlC7y.png",v="/code-note-page1/assets/image-56-yqA02B5B.png",u="/code-note-page1/assets/image-57-8Kkor9D8.png",b="/code-note-page1/assets/image-58-aDWfYgcl.png",x="/code-note-page1/assets/image-59-IolgYE6j.png",h="/code-note-page1/assets/image-60-_uV3TGld.png",S="/code-note-page1/assets/image-61-8i9g8MlC.png",A="/code-note-page1/assets/image-62-FV96KKu7.png",T="/code-note-page1/assets/image-63--4kEAILa.png",f="/code-note-page1/assets/image-64-c0ig60zH.png",L="/code-note-page1/assets/image-65-SjEUKaZD.png",j="/code-note-page1/assets/image-66-B2QsSlx4.png",k="/code-note-page1/assets/image-67-1sz0PIjj.png",C="/code-note-page1/assets/image-68-fSLIlkWJ.png",H="/code-note-page1/assets/image-69-dJq6H9jQ.png",P="/code-note-page1/assets/image-70-LGf5tmI8.png",B="/code-note-page1/assets/image-71-3oGi80Vw.png",y={},w=e("p",null,[e("img",{src:d,alt:"Alt text"})],-1),I=e("p",null,"那怎么升级为 HTTPS 证书呢？可以直接通过阿里云购买 SSL 证书，但特么巨贵！",-1),E=e("p",null,"本来想尝试一下 AWS 的免费 SSL 证书，但卡到验证码这一步就是收不到信息。",-1),N=e("p",null,[e("img",{src:m,alt:"Alt text"})],-1),J=e("p",null,"索性就还用 FreeSSL 吧。",-1),V=e("p",null,"FreeSSL.cn 是一个提供免费HTTPS证书申请的网站，网址如下：",-1),z={href:"https://freessl.cn",target:"_blank",rel:"noopener noreferrer"},D=i('<p>输入域名 tobebetterjavaer.com 选择 trustAsia 品牌证书，点击「创建」，这次我选择的是三年期自动化（刚好我的服务器申请的是三年，域名也是三年），9.9 元，还是非常良心的。</p><p><img src="'+_+'" alt="Alt text"></p><p>微信/支付宝支付完成后会跳到证书的订单列表。</p><p><img src="'+g+'" alt="Alt text"></p><p>选择「更多操作」里的订单详情，会跳转到 CertCloud 页的管理订单。</p><p><img src="'+v+'" alt="Alt text"></p><p>点击「提交 CSR」后点击「提交」。</p><p><img src="'+u+'" alt="Alt text"></p><p>接下来就到了域名验证环节，点击「获取验证信息」。</p><p><img src="'+b+'" alt="Alt text"></p><p>切换到域名解析设置页，准备添加记录。</p><p><img src="'+x+'" alt="Alt text"></p><p>按照 CertCloud 提供的域名验证信息，添加记录。</p><p><img src="'+h+'" alt="Alt text"></p><p>添加完成后切换到 CertCloud，点击「域名验证」。</p><p><img src="'+S+'" alt="Alt text"></p><p>如果不确定上一步的记录是否添加成功，可以点击「诊断」按钮进行测试，如果没有问题会提示匹配成功的信息。</p><p><img src="'+A+'" alt="Alt text"></p><p>之后，点击「我已完成配置，检测一下」，如果没有问题，会先提示等待 CA 颁发证书，之后再次检测会提示「证书已签发，请刷新页面查看」。</p><p><img src="'+T+'" alt="Alt text"></p><p>好的，直接刷新页面，可以看到订单状态已经变成「已签发」的状态。</p><p><img src="'+f+'" alt="Alt text"></p><p>点击证书操作中的「下载证书」，选择适用于 Nginx 的 PEM 格式证书，点击下载。</p><p><img src="'+L+'" alt="Alt text"></p>',24),F=e("p",null,[e("img",{src:j,alt:"Alt text"})],-1),K=i(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># HTTPS server

server {
    listen       443 ssl;
    server_name  localhost;

    ssl_certificate      /home/cert/nginx/tobebetterjavaer.com_cert_chain.pem;
    ssl_certificate_key  /home/cert/nginx/tobebetterjavaer.com_key.key;

    ssl_session_cache    shared:SSL:1m;
    ssl_session_timeout  5m;

    ssl_ciphers  HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers  on;

    location / {
        root   /home/www;
        index  index.html index.htm;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>记得在宝塔面板和云服务器后台放行 443 端口。</p><p><img src="`+k+'" alt="Alt text"></p>',3),q={href:"https://javabetter.cn",target:"_blank",rel:"noopener noreferrer"},G=i('<p><img src="'+C+'" alt="Alt text"></p><p>这时候，如果我们访问 80 端口的 http，仍然是可以的。只不过仍然会显示一个不安全的提示。</p><p><img src="'+H+`" alt="Alt text"></p><p>此时，我们需要将 HTTP 重定向到 HTTPS。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server {
    listen       80;
    server_name  tobebetterjavaer.com www.tobebetterjavaer.com;
    return 301 https://$server_name$request_uri;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注释掉原来的 80 端口监听，改为 return 跳转。</p><p><img src="`+P+'" alt="Alt text"></p><p>再次刷新原来的 HTTP 访问链接，可以看到已经跳转到 HTTPS 了，如果你查看地址栏的话，也会看到地址变成了 [https://javabetter.cn](https://javabetter.cn。</p><p><img src="'+B+'" alt="Alt text"></p><p>希望这个小破站能自力更生地活下去。目前已有的花费有：</p><ul><li>阿里云服务器：3 年 204 元</li><li>域名：3 年 273 元</li><li>SSL 证书：3 年 9.9 元</li></ul><p>希望能给学习 Java 的小伙伴提供一点点帮助，二哥就感觉值了！</p><p>到此为止，《二哥的Java进阶之路》网站的硬件设施就全部完善了，她已经是个成熟的宝宝了。</p><p>希望百度和谷歌等搜索引擎尽快收录，后面也会去学习一些 SEO 方面的知识，提高一下网站的排名，让网站获得更多的流量，从而提升品牌的影响力。</p><p>恭喜！</p>',15);function W(M,R){const n=o("RouterLink"),l=o("ExternalLinkIcon");return r(),c("div",null,[e("p",null,[t("上一次，我们完成"),s(n,{to:"/toBeBetterJavaer/szjy/buy-domain.html"},{default:a(()=>[t("域名解析")]),_:1}),t("后，发现浏览器地址栏里的域名被提示为不安全，就是因为它还是个宝宝，没有从 HTTP 升级为 HTTPS。")]),w,I,E,N,J,V,e("blockquote",null,[e("p",null,[e("a",z,[t("https://freessl.cn"),s(l)])])]),D,e("p",null,[t("使用 "),s(n,{to:"/toBeBetterJavaer/gongju/tabby.html"},{default:a(()=>[t("Tabby 终端")]),_:1}),t("的「SFTP」将证书上传到网站的云服务器。")]),F,e("p",null,[t("打开"),s(n,{to:"/toBeBetterJavaer/szjy/install-baota-mianban.html"},{default:a(()=>[t("宝塔面板")]),_:1}),t("，准备配置 Nginx 的 SSL 证书。将以下信息复制到 Nginx 的配置文件中，保存后重新加载配置。")]),K,e("p",null,[t("在地址栏访问 "),e("a",q,[t("https://javabetter.cn"),s(l)]),t(" 就可以看到我们的域名已经升级为 HTTPS 了（安全锁的小图标也显示出来了）。")]),G])}const U=p(y,[["render",W],["__file","https-domain.html.vue"]]);export{U as default};
